По всем фичам смотри реализацию в референсом проекте - /Users/dsudomoin/IdeaProjects/idea-claude-code-gui
А потом переводи все для compose + jewel

1) ~~Не работают кнопки выбора режима работы и модели~~ ✅
2) ~~Не добавляются скриншоты~~ ✅
3) ~~Кнопка настроек в чате открывает настройки плагина, а не настройки стриминга и thinking режима~~ ✅
4) ~~hover на кружок context не работает, круг заполняется против часовой~~ ✅
5) ~~Плюсик не работает~~ ✅
6) ~~mention файлов через @ не работает~~ ✅
7) ~~Перенос строки через shift+enter не работает~~ ✅
8) ~~Выпадающее окно для выбора режима и модели - ужасные. Нет не описаний, ничего. Плюс у самой кнопки нет стрелочки (подсказки, что можно выбрать)~~ ✅
9) ~~Скиншоты до сих пор не работают~~ ✅
10) ~~Настройки стриминга и thinking режима такие же ужасные, как и в 8 пункте~~ ✅
11) ~~Плюс заработал, но не дает выбрать файл~~ ✅
12) ~~@ работает, но chip помещается вверх header'а чата, а должен быть в самом чате. + не отображается иконка файла~~ ✅
13) ~~файл png через плюсик добавляется, но у фоток нет превью. Файл .propeties добавиться не смог~~ ✅
14) ~~файлы и скриншоты перенеси обратно выше header~~ ✅
15) ~~настройки режима и модели открываются по центру чата, а не у курсора~~ ✅
16) ~~скриншоты до сих пор не добавляются~~ ✅
17) ~~Cmd+V для скришотов все так же не работает~~ ✅
18) ~~Добавь возможность растягивать окно ввода вверх как хочет пользователь, а стрелку расширения убери~~ ✅
19) ~~Реальные иконки файлов до сих пор не показываются~~ ✅
20) ~~Нужные чуть больше отступы между сообщениями и tool блоками агента~~ ✅
21) ~~Write tool тоже должен быть expandable с highlighted text~~ ✅
22) ~~group tool блоки не работают~~ ✅
23) ~~Скриншоты по прежнему не добавляются через Cmd+V~~ ✅
24) ~~History нужно переделать на compose + jewel~~ ✅
25) ~~thinking блока с стримингом нет~~ ✅
26) ~~Нет всплывающего окна с планом при ExitPlanMode~~ ✅
27) ~~write tool до сих пор не раскрывается~~ ✅
28) ~~group блоки все так же не работают~~ ✅
29) ~~нет кнопок show diff и отката в edit tool~~ ✅
30) ~~Скриншот без превью в сообщении пользователя~~ ✅
31) ~~prompt enhancer не работает вообще~~ ✅
32) ~~При загрузке сессии нужно показывать сообщения с самого низа~~ ✅
33) ~~В Task tool нужен highlight text~~ ✅
34) ~~В Read и Edit tool нужно разрешить переходить по файлам, а так же добавить иконки файлов~~ ✅
35) ~~Добавь hover описание для кнопок diff и отката~~ ✅
36) ~~Кнопок diff и отката нет в group edit tool~~ ✅
37) ~~ask question кажется не работает вообще~~ ✅ (добавлен диагностический логинг)
38) ~~thinking блок все так же не отображается~~ ✅
39) ~~Кажется в plan он предложил не тот текст~~ ✅
40) ~~Дополнительно карандаши не нужны, только в хедере~~ ✅
41) ~~Нельзя выделять текст в чате~~ ✅
42) ~~Нормально не отображаются таблицы~~ ✅
43) ~~Show Diff можно оставить просто как Diff~~ ✅
44) ~~В файлы можно переходить теперь, но это непонятно (нет никакой индикации)~~ ✅
45) ~~Таблицы теперь вообще не показываются~~ ✅
46) ~~thinking (done) теперь показывается, но текст там слишком курсивный, можно убрать это. А еще при нажатии на thinking меня скролить вниз. Обычного thinking я так и не увидел~~ ✅
47) ~~План все еще нормально не отображается. Смотри референс, как там обрабатывается~~ ✅
48) ~~Нужно сохранять названия чата в историю~~ ✅
49) ~~Ask question так и не работает~~
50) ~~Открытый файл в чате не прикрепляется в chip~~
51) ~~Выделенные строки не обновляются в chip открытого файла~~ ✅
52) ~~Нужно уметь раскладывать отдельный tool из tool group~~ ✅
53) ~~Таблица теперь выглядит так: ![img_9.png](img_9.png)~~ ✅
54) ~~С планом все еще не так ![img_10.png](img_10.png)  Смотри референс, как там обрабатывается~~ ✅
55) ~~В AskUserQuestion нельзя переносить строки в свободном ответе через shift+enter~~ ✅
56) ~~Не показывай текст [Stopped] при отмене генерации ответа~~ ✅
57) Нужно сделать паузу авто-скролла при стриминге
58) Редактируемые заголовки сессий
59) Стрелка вверх выводит в окно ввода последнее сообщение. Нужно разрешить мотать все сообщения пользователя от последнего к первому. Стрелка вниз - назад
60) Панель с "Tasks", "Subagent", "Edits" должна показываться всегда, даже если ничего нет. Она разделена на три независимые вкладки, которые разворачиваются при нажатии. Если в этой вкладке ничего нет - пишем, что ничего нет. Высота должна зависеть от количества того, что внутри. Нужна кнопка в хедере окна ввода, которая скроет/раскроет эту панель